<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Page</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="edit.css">
    <link rel="stylesheet" href="cropper.css">
    <script type="module" src="authdb.js"></script>
</head>

<body>

    <div class="blur-overlay"></div>
    <div class="topbar">
        <span onclick="Return_admin()" class="menu-icon">üè†</span>
        <h2 id="edit-page">Edit Page</h2>
        <div class="profile">
            <button class="logoutBtn" id="logoutBtn">Logout</button>
        </div>
    </div>

    <div id="need-admin"></div>

    <div class="logindb">
        <h1>Login Edit Page</h1>
        <form id="loginForm">
            <div class="txt_field">
                <input type="email" id="email" required>
                <label>Email</label>
            </div>
            <div class="txt_field">
                <input type="password" id="password" required>
                <label>Password</label>
            </div>
            <button type="submit">Login</button>
        </form>
    </div>

    <div class="view-container">
        <table id="hbody"></table>
    </div>

    <div class="edit-container">
        <div class="editor-container">
            <div class="toolbar">
                <button title="ƒê·∫≠m" onclick="formatDoc('bold')"><b>B</b></button>
                <button title="Nghi√™n" onclick="formatDoc('italic')"><I>I</I></button>
                <button title="G·∫°ch ch√¢n" onclick="formatDoc('underline')"><U>U</U></button>
                <select title="Ti√™u ƒë·ªÅ" id="heading-select" onchange="applyHeading()">
                    <option value="P" selected>P</option>
                    <option value="H1">H1</option>
                    <option value="H2">H2</option>
                    <option value="H3">H3</option>
                    <option value="H4">H4</option>
                    <option value="H5">H5</option>
                    <option value="H6">H6</option>
                </select>

                <div title="Text color" class="color">
                    <span><i class='bx bx-color-fill'></i></span>
                    <input type="color" oninput="formatDoc('foreColor', this.value); this.value='#000000';">
                </div>

                <button title="S·ªë ƒë·∫ßu d√≤ng" id="insert-ol" onclick="insertOrderedList()"><i
                        class='bx bx-list-ol'></i></button>
                <button title="Ch·∫•m ƒë·∫ßu d√≤ng" id="insert-ul" onclick="insertUnorderedList()"><i
                        class='bx bx-list-ul'></i></button>
                <button title="Full" onclick="formatDoc('justifyFull')"><i class='bx bx-align-justify'></i></button>
                <button title="Center" onclick="formatDoc('justifyCenter')"><i class='bx bx-align-middle'></i></button>
                <button title="Left" onclick="formatDoc('justifyLeft')"><i class='bx bx-align-left'></i></button>
                <button title="Right" onclick="formatDoc('justifyRight')"><i class='bx bx-align-right'></i></button>

                <button title="Hyper Link" onclick="addLink()"><i class='bx bx-link'></i></button>

                <button title="Image Link" onclick="addImagelink()"><i class='bx bx-image-add'></i></button>

                <button title="Upload Image" onclick="triggerImageUpload()"><i class='bx bx-upload'></i></button>
                <input type="file" id="image-upload" accept="image/*" style="display: none;"
                    onchange="addImage(event)" />

                <button title="Crop Image" onclick="triggerImageUpload_edit()"><i class='bx bx-image'></i></button>
                <input type="file" id="image-upload-edit" accept="image/*" style="display: none;"
                    onchange="imageData_edit()" />

                <button onclick="adjustFontSize(-1)">-</button>
                <span id="font-size-display">16</span>
                <button onclick="adjustFontSize(1)">+</button>
                <button title="Show Code" id="show-code" data-active="false">&lt;/&gt;</button>
            </div>

            <div class="wrapper hide">
                <div class="container">
                    <div class="image-container">
                        <img id="image" />
                    </div>
                </div>
                <div class="btns">
                    <button id="use-btn" class="hide">Use</button>
                    <button onclick="closeImageCropper()">Close</button>
                </div>
            </div>

            <div id="content" class="content" contenteditable="true" oninput="checkEditorContent()"></div>
            <div class="actions">
                <button title="X√≥a b√†i vi·∫øt" style="background-color: red;" onclick="Delete()">Delete</button>
                <button title="L∆∞u n·ªôi dung" id="save-btn" class="disabled" disabled
                    onclick="savePost(event)">Save</button>
                <button title="ƒêƒÉng b√†i vi·∫øt" style="background-color: green;" onclick="push_to_news()">Push</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

        try {
            let api_private = JSON.parse(localStorage.getItem("api_private"));
            const app_1 = initializeApp(api_private);
            const auth_1 = getAuth(app_1);
        } catch (error) {

        }

        // X·ª≠ l√Ω ƒëƒÉng nh·∫≠p
        document.getElementById("loginForm").addEventListener("submit", (e) => {
            e.preventDefault();
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            signInWithEmailAndPassword(auth_1, email, password)
                .then((userCredential) => {
                    // window.history.back();
                    document.querySelector('.logindb').style.display = "none";
                    document.querySelector('.logoutBtn').style.display = "block";
                })
                .catch((error) => {
                    alert("T√†i kho·∫£n ho·∫∑c M·∫≠t kh·∫©u kh√¥ng ch√≠nh x√°c!");
                });
        });
    </script>

    <script src="/lib/link.js"></script>
    <script src="/lib/framework.js"></script>
    <script src="cropper.js"></script>
    <script src="edit.js"></script>

</body>

</html>